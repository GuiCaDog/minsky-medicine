<!DOCTYPE html>

<head>
  <title>
    BrainBrowser Volume Viewer
  </title>
  <link type="text/css" href="css/ui-darkness/jquery-ui-1.8.10.custom.css" rel="Stylesheet" />
  <link type="text/css" href="css/common.css" rel="Stylesheet" />
  <link type="text/css" href="css/minsky-viewer.css" rel="Stylesheet" />
</head>
<body>

  
  <script id="volume-ui-template" type="x-volume-ui-template">
    <div class="volume-viewer-display">

    </div>
  </script>
  <script id="overlay-ui-template" type="x-volume-ui-template">
    <div class="overlay-viewer-display">
    </div>
  </script>

  <div id="brainbrowser-wrapper" > 

    <!-- Visor Volumen-->
    <div id="volume-viewer">
      <div id="brainbrowser"></div>
    </div>

    <!-- Visor Volumen-->
    <div id="surface-viewer">
      <div id="brainbrowser1"></div>
    </div>

  </div>


  <script>

    // Este trozo de código tiene como finalidad dar al visor de superficie
    // un tamaño adecuado para la pantalla en la que se visualiza, asi como
    // recalcular el tamaño del visor cuando se redimensione la pantalla. 
    // Este código es necesario pues el visor de superficie no tiene una
    // funcion de redimensionado en la API de BrainBrowser. Así como el visor
    // de volumen tiene viewer.setDefaultPanelSize() y viewer.setPanelSize().

    var W = '';
    var H = '';

    // Esta función se ejecuta cuando todo se ha cargado.
    // Una vez ha cargado todo (que es cuando podremos referenciar el visor de superficie)
    // hacemos que su tamaño sea igual a un medio de la altura de la ventana del navegador.
    window.addEventListener('load', () => {

      var height = window.innerHeight / 2.1;

      document.getElementById("brainbrowser1").style.width = height + 'px';
      document.getElementById("brainbrowser1").style.height = height + 'px';
    })

    // De igual manera, cuando se redimensiona la ventana del navegador,
    // recalculamos el tamaño del visor de superficie. Esta vez haciendo
    // que su altura y anchura sea igual al tamaño de los paneles del visor de volumen.
    window.addEventListener('resize', function(event){

      W = document.getElementsByClassName('slice-display')[0].clientWidth;
      H = document.getElementsByClassName('slice-display')[0].clientHeight;

      document.getElementById("brainbrowser1").style.width = W + 'px';
      document.getElementById("brainbrowser1").style.height = H + 'px';

    })
  </script>
  
  <script src="js/jquery-1.6.4.min.js"></script>
  <script src="js/jquery-ui-1.8.10.custom.min.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/pako.js"></script>
  <script src="js/brainbrowser/brainbrowser.js"></script>
  <script src="js/brainbrowser/core/tree-store.js"></script>
  <script src="js/brainbrowser/lib/config.js"></script>
  <script src="js/brainbrowser/lib/utils.js"></script>
  <script src="js/brainbrowser/lib/events.js"></script>
  <script src="js/brainbrowser/lib/loader.js"></script>
  <script src="js/brainbrowser/lib/color-map.js"></script>
  <script src="js/brainbrowser/volume-viewer.js"></script>
  <script src="js/brainbrowser/volume-viewer/lib/display.js"></script>
  <script src="js/brainbrowser/volume-viewer/lib/panel.js"></script>
  <script src="js/brainbrowser/volume-viewer/lib/utils.js"></script>
  <script src="js/brainbrowser/volume-viewer/modules/loading.js"></script>
  <script src="js/brainbrowser/volume-viewer/modules/rendering.js"></script>
  <script src="js/brainbrowser/volume-viewer/volume-loaders/overlay.js"></script>
  <script src="js/brainbrowser/volume-viewer/volume-loaders/minc.js"></script>
  <script src="js/brainbrowser/volume-viewer/volume-loaders/nifti1.js"></script>
  <script src="js/brainbrowser/volume-viewer/volume-loaders/mgh.js"></script>
  <script src="js/brainbrowser/volume-viewer/volume-loaders/hdf5.js"></script>
  <script src="js/brainbrowser/volume-viewer/volume-loaders/netcdf.js"></script>
  <script src="minsky-viewer.config.js"></script>
  <script src="minsky-viewer.js"></script> 
  <script src="js/brainbrowser/surface-viewer.js"></script>
  <script src="js/brainbrowser/surface-viewer/lib/three.js"></script>
  <script src="js/brainbrowser/surface-viewer/lib/parse-intensity-data.js"></script>
  <script src="js/brainbrowser/surface-viewer/modules/annotations.js"></script>
  <script src="js/brainbrowser/surface-viewer/modules/color.js"></script>
  <script src="js/brainbrowser/surface-viewer/modules/loading.js"></script>
  <script src="js/brainbrowser/surface-viewer/modules/rendering.js"></script>
  <script src="js/brainbrowser/surface-viewer/modules/views.js"></script>
  <!-- <script src="minsky-surface.config.js"></script> -->
  <script src="js/AnaglyphEffect.js"></script>
  <script src="minsky-surface.js"></script>
</body>
